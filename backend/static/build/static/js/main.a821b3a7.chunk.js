(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{162:function(e,t,n){e.exports=n(347)},167:function(e,t,n){},347:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"init",(function(){return w})),n.d(r,"newProject",(function(){return C})),n.d(r,"clear",(function(){return y})),n.d(r,"setCanvas",(function(){return T})),n.d(r,"changeName",(function(){return N})),n.d(r,"changeDimensions",(function(){return j})),n.d(r,"changeDuration",(function(){return P})),n.d(r,"changeCellSize",(function(){return S})),n.d(r,"importPixelate",(function(){return A})),n.d(r,"applyTools",(function(){return k})),n.d(r,"switchTool",(function(){return I})),n.d(r,"selectPaletteColor",(function(){return _})),n.d(r,"applyColorPicker",(function(){return D})),n.d(r,"addNewFrame",(function(){return R})),n.d(r,"addDuplicatedFrame",(function(){return L})),n.d(r,"deleteFrame",(function(){return U})),n.d(r,"switchFrame",(function(){return F})),n.d(r,"reorderFrame",(function(){return M})),n.d(r,"undo",(function(){return z})),n.d(r,"redo",(function(){return x}));var a=n(0),o=n.n(a),c=n(28),i=n.n(c),u=(n(87),n(167),n(7)),l=n(8),s=n(10),d=n(9),p=n(11),f="PENCIL",m="APPLY_".concat(f),g="APPLY_".concat("ERASER"),v="APPLY_".concat("PAINT_BUCKET"),E="APPLY_".concat("EYE_DROPPER"),h="APPLY_".concat("COLOR_PICKER"),b=n(30),O=n.n(b);function w(){return{type:"SET_INIT_STATE"}}function C(){return{type:"NEW_PROJECT"}}function y(){return{type:"CLEAR"}}function T(e,t,n,r,a){return{type:"SET_CANVAS",grids:e,paletteGrid:t,cellSize:n,columns:r,rows:a}}function N(e){return{type:"CHANGE_NAME",name:e}}function j(e,t){return{type:"CHANGE_DIMENSIONS",newColumns:e,newRows:t}}function P(e){return{type:"CHANGE_DURATION",duration:e}}function S(e){return{type:"CHANGE_CELL_SIZE",size:e}}function A(e){return{type:"IMPORT_PIXELATE",grids:e.grids,columns:e.columns,rows:e.rows,options:e.options}}function k(e){var t=e.paletteColor,n=void 0===t?"":t,r=e.color,a=e.id,o=e.columns,c=e.rows,i=e.drawingTool;return{type:"APPLY_".concat(i),paletteColor:n,color:r,id:a,columns:o,rows:c}}function I(e){return{type:"SWITCH_TOOL",drawingTool:e}}function _(e){return{type:"SELECT_PALETTE_COLOR",id:e}}function D(e){return{type:h,color:e}}function R(){return{type:"ADD_NEW_FRAME"}}function L(e){return{type:"ADD_DUPLICATED_FRAME",id:e}}function U(e){return{type:"DELETE_FRAME",id:e}}function F(e){return{type:"SWITCH_FRAME",id:e}}function M(e,t){return{type:"REORDER_FRAMES",initIndex:e,finalIndex:t}}function z(){return b.ActionCreators.undo()}function x(){return b.ActionCreators.redo()}function H(e){try{var t=e.getItem("FTL");return!!t&&JSON.parse(t)}catch(n){return!1}}var W=function(e,t){var n=H(t);if(n){if(n.current>0){var r=n.stored[n.current],a=r.grids,o=r.paletteGridData,c=r.columns,i=r.rows,u=r.cellSize;r.duration;e(T(a,o,u,c,i))}}else!function(e){e.setItem("FTL",JSON.stringify({stored:[],current:0}))}(t)},G=n(4),B=Object(G.b)((function(e){return{name:e.present.get("canvas").get("name")}}),(function(e){return{changeName:function(){return e(N)}}}))((function(e){e.changeName,e.name;return o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"title"},o.a.createElement("h2",null," PIXEL HUB ")),o.a.createElement("div",{className:"author"},o.a.createElement("h5",null,"GITHUB: ",o.a.createElement("a",{target:"_blank",href:"https://github.com/ftlll/pixel"},"FTL"))))})),J=n(53),Y=n(161),K=function(e,t){return Object(Y.a)({color:e.grid.get(t),id:t},e)},V=function(e){return{onMouseUp:function(){e.setState({pressed:!1})},drawHandlers:function(t){return{onMouseDown:function(n,r){r.preventDefault();var a=t.props,o=K(a,n);a.applyTools(o),e.setState({pressed:!0})},onMouseOver:function(n,r){r.preventDefault();var a=t.props,o=K(a,n);e.state.pressed&&a.applyTools(o)}}}}},X=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.cell,n=t.color,r=t.width;return e.color!==n||e.width!==r}},{key:"render",value:function(){var e=this.props,t=e.cell,n=t.color,r=t.width,a=e.id,c=e.drawHandler,i={width:"".concat(r,"%"),height:"".concat(r,"%"),backgroundColor:n||"rgba(49, 49, 49, 0.5)"};return o.a.createElement("div",{style:i,className:"cell",onMouseDown:function(e){return c.onMouseDown(a,e)},onMouseOver:function(e){return c.onMouseOver(a,e)},onFocus:function(e){return c.onMouseOver(a,e)},onTouchStart:function(e){return c.onMouseDown(a,e)}})}}]),t}(o.a.Component),Z=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.cells;return e.cells!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.cells;return o.a.createElement("div",{style:n},r.map((function(t,n){return o.a.createElement(X,{cell:t,key:t.id,id:n,drawHandler:e.props.drawHandler})})))}}]),t}(o.a.Component),$=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={pressed:!1},n.drawHandlerProvider=V(Object(J.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.grid;return e.grid!==t}},{key:"render",value:function(){var e=this.props,t=e.grid.map((function(t,n){return{id:n,width:100/e.columns,color:t}}));return o.a.createElement("div",{onMouseUp:this.drawHandlerProvider.onMouseUp,onTouchEnd:this.drawHandlerProvider.onMouseUp,onTouchCancel:this.drawHandlerProvider.onMouseUp},o.a.createElement(Z,{style:{height:400,width:400},cells:t,drawingTool:e.drawingTool,drawHandler:this.drawHandlerProvider.drawHandlers(this)}))}}]),t}(o.a.Component),q=Object(G.b)((function(e){var t=e.present.get("canvas"),n=e.present.get("drawingTool"),r=e.present.get("palette"),a=r.get("active"),o=r.getIn(["grid",-1===a?0:a,"color"]);return{grid:t.get("grids").get(t.get("active")),paletteColor:o,drawingTool:n,columns:t.get("columns"),rows:t.get("rows")}}),(function(e){return{applyTools:function(t){return e(k(t))}}}))($),Q=n(129),ee=n.n(Q),te=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={visible:!1},n.handleClick=function(){n.setState({visible:!n.state.visible})},n.handleClose=function(){n.setState({visible:!1})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.applyColorPicker,r=e.applyPencil,a=e.usingColorPicker;return this.applyColorPicker=function(e){var t="rgba("+(e=e.rgb).r+","+e.g+","+e.b+","+e.a+")";n(t),r()},o.a.createElement("div",{className:"color-picker ".concat(a?"active":"")},o.a.createElement("i",{className:"fas fa-paint-brush",onClick:this.handleClick}),this.state.visible?o.a.createElement("div",{className:"popover"},o.a.createElement("div",{className:"cover",onClick:this.handleClose}),o.a.createElement(ee.a,{color:t,onChange:this.applyColorPicker,onClose:this.handleClose,type:"sketch"})):null)}}]),t}(o.a.Component),ne=Object(G.b)((function(e){var t=e.present.get("palette").toObject(),n=t.grid,r=t.active;return{color:-1===r?"rgba(49,49,49,1)":n.getIn([r,"color"]),usingColorPicker:"COLOR_PICKER"===e.present.get("drawingTool")}}),(function(e){return{applyColorPicker:function(t){return e(D(t))},applyPencil:function(){return e(I(f))}}}))(te),re=Object(G.b)((function(e){return{usingEraser:"ERASER"===e.present.get("drawingTool")}}),(function(e){return{switchEraser:function(){return e(I("ERASER"))}}}))((function(e){var t=e.usingEraser,n=e.switchEraser;return o.a.createElement("div",{className:"eraser ".concat(t?"active":"")},o.a.createElement("i",{"aria-label":"Eraser Tool",onClick:n,className:"fas fa-eraser"}))})),ae=Object(G.b)((function(e){return{usingEyeDropper:"EYE_DROPPER"===e.present.get("drawingTool")}}),(function(e){return{switchEyeDropper:function(){return e(I("EYE_DROPPER"))}}}))((function(e){var t=e.usingEyeDropper,n=e.switchEyeDropper;return o.a.createElement("div",{className:"eye-dropper ".concat(t?"active":"")},o.a.createElement("i",{"aria-label":"EyeDropper Tool",onClick:n,className:"eyeDropper fas fa-eye-dropper"}))})),oe=n(12),ce=function(e){var t=e.width,n=e.color,r=e.active,a=e.selectPaletteColor,c=e.id,i={width:"".concat(t,"%"),height:"".concat(t,"%"),backgroundColor:n||"rgba(49, 49, 49, 0.5)"};return o.a.createElement("button",{style:i,onClick:function(){return a(c)},className:"palette-cell ".concat(r?"active":"")})},ie=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.grid,n=e.active,r=e.selectPaletteColor;return o.a.createElement("div",{className:"palette-grid"},t.map((function(e,t){return o.a.createElement(ce,{color:e.get("color"),active:n===t,width:12.5,key:e.get("id"),id:t,selectPaletteColor:r})})))}}]),t}(o.a.Component),ue=Object(G.b)((function(e){var t=e.present.get("palette").toObject();return{grid:t.grid,active:t.active}}),(function(e){return Object(oe.b)({selectPaletteColor:_},e)}))(ie),le=Object(G.b)((function(e){return{usingPaintBucket:"PAINT_BUCKET"===e.present.get("drawingTool")}}),(function(e){return{switchPaintBucket:function(){return e(I("PAINT_BUCKET"))}}}))((function(e){var t=e.usingPaintBucket,n=e.switchPaintBucket;return o.a.createElement("div",{className:"bucket ".concat(t?"active":"")},o.a.createElement("i",{"aria-label":"Paint Bucket Tool",className:"fas fa-fill-drip",onClick:n}))})),se=Object(G.b)(null,(function(e){return{actions:Object(oe.b)(r,e)}}))((function(e){return o.a.createElement("div",{className:"undo-redo"},o.a.createElement("div",{className:"undo-container"},o.a.createElement("button",{className:"undo fas fa-undo-alt",onClick:function(){e.actions.undo()}})),o.a.createElement("div",{className:"redo-container"},o.a.createElement("button",{className:"redo fas fa-redo-alt",onClick:function(){e.actions.redo()}})))})),de=n(130),pe=n.n(de),fe=n(83),me=n(39),ge=n(6);var ve=n(62),Ee=Object(ve.a)((function(e){var t=ve.a.keyframes(e.boxShadow,"pulse"),n={position:"absolute",animation:"x ".concat(e.duration,"s infinite"),animationName:t,left:"-5px",top:"-5px"};return o.a.createElement("div",{style:n})})),he=function(e){var t=e.storedData||e,n=t.columns,r=t.rows,a=t.cellSize,c={width:n*a,height:r*a};return o.a.createElement("div",{className:"preview",style:c},function(){var t,n,r=e.active,a=e.duration,c=(e.storedData,e.grids),i=e.columns,u=e.cellSize,l=e.animate,s=c.size>1&&l,d={previewWrapper:{height:u,width:u}};return l?t=function(e,t,n){var r=Object(ge.a)(),a=e.size,o=100/a;return e.forEach((function(e,t){var n=t===a-1?100:Math.round((t+1)*o*10)/10,c=Object(ge.b)({grid:e,interval:n});r=r.push(c)})),Object(me.getAnimationKeyframes)(r,{pSize:n,c:t})}(c,i,u):n=function(e,t,n,r){return Object(me.getImageData)(e,{format:r,pSize:n,c:t})}(c.get(r),i,u,"string"),d.previewWrapper.boxShadow=n,d.previewWrapper.MozBoxShadow=n,d.previewWrapper.WebkitBoxShadow=n,o.a.createElement("div",{style:s?null:d.previewWrapper},s?o.a.createElement(fe.a,null,o.a.createElement(Ee,{duration:a,boxShadow:t})):null)}())},be=(n(348),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={},n.fileProcess=function(e){n.setState({file:e.target.files[0]})},n.fileUpload=function(){n.props.fileUpload(n.state)},n.getImportContent=function(e){},n.getExportContent=function(e){},n.getModalContent=function(e){var t;switch(e){case"import":t=o.a.createElement("div",{className:"modal-content"},o.a.createElement("button",{className:"popup-close",onClick:function(){return n.props.close()}},"x"),o.a.createElement("div",{className:"popup-header"},"Import"),o.a.createElement("input",{type:"file",onChange:n.fileProcess}),o.a.createElement("button",{onClick:n.fileUpload},"Upload"));break;case"export":t=o.a.createElement("div",{className:"modal-content"},o.a.createElement("button",{className:"popup-close",onClick:function(){return n.props.close()}},"x"),o.a.createElement("div",{className:"popup-header"},"Export"),o.a.createElement(he,{key:"0",grids:n.props.grids,columns:n.props.columns,rows:n.props.rows,cellSize:5,duration:5,active:0,animate:!0}))}return t},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.popUpType;return o.a.createElement(pe.a,{visible:n,width:"80%",height:"80%",effect:"fadeInUp",onClickAway:function(){return e.props.close()}},this.getModalContent(r))}}]),t}(o.a.Component)),Oe=Object(G.b)((function(e){var t=e.present.get("canvas"),n=t.get("active");return{grids:t.get("grids"),active:n,activeGrid:t.getIn(["grids",n]),paletteGridData:e.present.getIn(["palette","grid"]),columns:t.get("columns"),rows:t.get("rows"),cellSize:e.present.get("size"),duration:e.present.get("duration")}}),(function(e){return{fileUpload:function(t){var n=new FormData;t.file?(n.append("file",t.file),fetch("http://localhost:5000/api/pixelate",{headers:{"Access-Control-Allow-Origin":!0},method:"POST",body:n}).then((function(e){return e.json()})).then((function(t){e(A(t))}))):alert("no file attached")}}}))(be),we=Object(G.b)(null,(function(e){return{newProject:function(){return e({type:"NEW_PROJECT"})}}}))((function(e){var t=e.newProject;return o.a.createElement("button",{type:"button",className:"newProject",onClick:t},"NEW PROJECT")})),Ce=Object(G.b)(null,(function(e){return{clear:function(){return e({type:"CLEAR"})}}}))((function(e){var t=e.clear;return o.a.createElement("button",{type:"button",className:"clear",onClick:t},"CLEAR")})),ye=Object(G.b)((function(e){var t=e.present.get("canvas");return{grids:t.get("grids"),columns:t.get("columns"),rows:t.get("rows"),cellSize:e.present.get("cellSize"),paletteGridData:e.present.getIn(["palette","grid"])}}),(function(e){return{}}))((function(e){return o.a.createElement("button",{className:"save",type:"button",onClick:function(){var t={grids:e.grids,paletteGridData:e.paletteGridData,cellSize:e.cellSize,columns:e.columns,rows:e.rows,animate:e.grids.size>1};!function(e,t){try{var n=H(e);n?(n.stored.push(t),n.current=n.stored.length-1):n={stored:[t],current:0},e.setItem("FTL",JSON.stringify(n))}catch(r){return!1}}(localStorage,t)}},"SAVE")})),Te=n(38),Ne=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.grid,n=e.columns,r=e.rows,a=e.actions,c=e.id,i=function(){a.switchFrame(c)},u=function(){a.addDuplicatedFrame(c)},l=function(){a.deleteFrame(c)};return o.a.createElement(Te.b,{key:c,draggableId:c.toString(),index:c},(function(e){return o.a.createElement("div",Object.assign({onClick:i},e.draggableProps,e.dragHandleProps,{ref:e.innerRef,className:"frame"}),o.a.createElement(he,{key:c,grids:Object(ge.a)([t]),columns:n,rows:r,cellSize:5,active:0}),o.a.createElement("i",{onClick:u,className:"frame-add fas fa-copy"}),o.a.createElement("i",{onClick:l,className:"frame-delete fas fa-trash-alt"}))}))}}]),t}(o.a.Component),je=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onDragEnd=function(e){var t=e.destination,r=e.source,a=n.props.actions;t&&(t.droppableId===r.droppableId&&t.index===r.index||a.reorderFrame(r.index,t.index))},n.addNewFrame=function(){n.props.actions.addNewFrame()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getFrames",value:function(){var e=this.props,t=e.grids,n=e.columns,r=e.rows,a=e.actions;return t.map((function(e,t){return o.a.createElement(Ne,{key:t,id:t,grid:e,columns:n,rows:r,actions:{switchFrame:a.switchFrame,deleteFrame:a.deleteFrame,addDuplicatedFrame:a.addDuplicatedFrame}})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"frames-handler"},o.a.createElement("button",{type:"button",className:"frames-list-add",onClick:function(){return e.addNewFrame()}},o.a.createElement("div",null,"+")),o.a.createElement("div",{className:"frames-list-content"},o.a.createElement(Te.a,{onDragEnd:this.onDragEnd,className:"framesHandlerContext"},o.a.createElement(Te.c,{droppableId:"droppable",direction:"vertical",className:"frames-handler"},(function(t){return o.a.createElement("div",Object.assign({ref:t.innerRef},t.droppableProps),e.getFrames(),t.placeholder)})))))}}]),t}(o.a.Component),Pe=Object(G.b)((function(e){return e.present.get("canvas").toObject()}),(function(e){return{actions:Object(oe.b)(r,e)}}))(je),Se=Object(G.b)((function(e){var t=e.present.get("canvas");return{columns:t.get("columns"),rows:t.get("rows"),duration:t.get("duration"),size:t.get("size")}}),(function(e){return{changeDimensions:function(t,n){return e(j(t,n))}}}))((function(e){var t=e.changeDimensions,n=e.rows,r=e.columns;return o.a.createElement("div",null,o.a.createElement("div",{className:"duration"},o.a.createElement("label",null," ROWS",o.a.createElement("input",{type:"number",value:n,onChange:function(e){var n;n=e.target.value,t(r,n)}}))),o.a.createElement("div",{className:"duration"},o.a.createElement("label",null," COLUMNS",o.a.createElement("input",{type:"number",value:r,onChange:function(e){var r;r=e.target.value,t(r,n)}}))))})),Ae=n(160),ke=n.n(Ae),Ie=Object(G.b)((function(e){return{canvas:e.present.get("canvas")}}),(function(e){return{}}))((function(e){var t=e.canvas;return o.a.createElement("div",{onClick:function(){fetch("http://localhost:5000/api/img",{headers:{"Access-Control-Allow-Origin":!0,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({grids:t.get("grids"),columns:t.get("columns"),rows:t.get("rows"),active:t.get("active")})}).then((function(e){return e.blob()})).then((function(e){ke.a.saveAs(e,"pil.gif")}))}},"DOWNLOAD")})),_e=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).state={popUpType:null,popUpShown:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;W(e,localStorage)}},{key:"setPopUp",value:function(e){this.setState({popUpShown:!0,popUpType:e})}},{key:"closePopUp",value:function(){this.setState({popUpShown:!1,popUpType:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.popUpShown,r=t.popUpType;return o.a.createElement("div",{className:"background"},o.a.createElement("div",{className:"app"},o.a.createElement(B,null),o.a.createElement("div",{className:"tool-bar"},o.a.createElement(we,null),o.a.createElement(Ce,null),o.a.createElement(ye,null),o.a.createElement("button",{className:"upload",onClick:function(){return e.setPopUp("import")}},"IMPORT"),o.a.createElement("button",{className:"upload",onClick:function(){return e.setPopUp("export")}},"EXPORT")),o.a.createElement("div",{className:"app-content"},o.a.createElement("div",{className:"side-bar col-lg-2"},o.a.createElement(Pe,null)),o.a.createElement("div",{className:"canvas-container col-lg-6"},o.a.createElement(q,null)),o.a.createElement("div",{className:"tools col-lg-4"},o.a.createElement("div",{className:"col-12"},o.a.createElement(ue,null),o.a.createElement("div",null,o.a.createElement(re,null),o.a.createElement(le,null),o.a.createElement(ae,null),o.a.createElement(ne,null)),o.a.createElement(se,null),o.a.createElement(Se,null),o.a.createElement(Ie,null)))),o.a.createElement(Oe,{visible:n,popUpType:r,close:function(){return e.closePopUp()}})))}}]),t}(o.a.Component),De=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options||{},n=parseInt(t.columns,10)||16,r=parseInt(t.rows,10)||16,a=parseInt(t.size,10)||10,o=parseInt(t.duration,10)||5,c=Object(ge.a)(),i=0;i<r*n;i++)c=c.push("");var u=Object(ge.a)();return u=u.push(c),Object(ge.b)({name:"name",grids:u,active:0,columns:n,rows:r,size:a,duration:o})},Re=function(e,t){var n=t.grids,r=t.columns,a=t.rows,o=t.cellSize,c=t.duration;return Object(ge.c)({grids:n,columns:r,rows:a,size:o,duration:c,active:0})},Le=function(e){var t=e.columns,n=e.rows,r=Object(ge.a)(e.grids);return Object(ge.b)({grids:r,active:0,columns:t,rows:n})},Ue=function(e,t){return e.merge({name:t.name})},Fe=function(e,t){var n=e.get("columns"),r=e.get("rows"),a=t.newColumns,o=t.newRows,c=Object(ge.a)();return e.get("grids").forEach((function(e){c=c.push(function(e,t,n,r,a){var o=a-n,c=r-t,i=e;if(o>0)for(var u=0;u<t;u++)for(var l=0;l<o;l++)i=i.push("");else if(o<0)for(var s=0;s<t;s++)for(var d=o;d<0;d++)i=i.splice(-1,1);else if(c>0)for(var p=t*n;p>0;p-=t)for(var f=0;f<c;f++)i=i.insert(p,"");else if(c<0)for(var m=t*n;m>0;m-=t)i=i.splice(m+c,-c);return i}(e,n,r,a,o))})),e.merge({grids:c,columns:a,rows:o})},Me=function(e,t){var n=t.duration;return e.merge({duration:n})},ze=function(e,t){var n=t.size;return e.merge({size:n})},xe=function(e,t){for(var n=e.get("grids"),r=e.get("columns"),a=e.get("rows"),o=Object(ge.a)(),c=0;c<a*r;c++)o=o.push("");var i=n.insert(n.size,o);return e.merge({grids:i,active:n.size})},He=function(e,t){var n=e.get("grids"),r=n.get(t.id),a=n.insert(t.id,r);return e.merge({grids:a,active:t.id+1})},We=function(e,t){var n=e.get("grids").remove(t.id);return e.merge({grids:n,active:t.id})},Ge=function(e,t){return e.merge({active:t.id})},Be=function(e,t){var n=e.get("grids"),r=t.initIndex,a=t.finalIndex,o=r<a,c=a+(o?1:0),i=r+(o?0:1),u=n.get(r);return n=n.splice(c,0,u).splice(i,1),e.merge({grids:n,active:a})},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INIT_STATE":case"NEW_PROJECT":return De(t);case"SET_CANVAS":return Re(0,t);case"CHANGE_NAME":return Ue(e,t);case"CHANGE_DIMENSIONS":return Fe(e,t);case"CHANGE_DURATION":return Me(e,t);case"CHANGE_DURATION":return ze(e,t);case"IMPORT_PIXELATE":return Le(t);case"ADD_NEW_FRAME":return xe(e);case"ADD_DUPLICATED_FRAME":return He(e,t);case"DELETE_FRAME":return We(e,t);case"SWITCH_FRAME":return Ge(e,t);case"REORDER_FRAMES":return Be(e,t);default:return e}},Ye=function(e,t,n){return e.set(n,t)},Ke=function(e,t){var n=e.get("active"),r=function(e,t){var n=t.paletteColor,r=t.id;return Ye(e,n,r)}(e.get("grids").get(n),t);return e.setIn(["grids",n],r)},Ve=function(e,t){return(e||"rgba(49, 49, 49, 1)")===(t||"rgba(49, 49, 49, 1)")},Xe=function(e,t,n,r,a){var o=[];return n>=r&&Ve(e.get(n-r),t)&&o.push(n-r),n<(r-1)*a&&Ve(e.get(n+r),t)&&o.push(n+r),n%r!==0&&Ve(e.get(n-1),t)&&o.push(n-1),n%r!==r-1&&Ve(e.get(n+1),t)&&o.push(n+1),o},Ze=function(e,t){var n=e.get("active"),r=function(e,t){for(var n,r,a=t.id,o=t.paletteColor,c=t.columns,i=t.rows,u=e.get(a),l=[a],s=e;l.length>0;){n=l.shift(),s=Ye(s,o,n),r=Xe(s,u,n,c,i);for(var d=0;d<r.length;d++){var p=r[d],f=s.get(p);-1===l.indexOf(p)&&f!==o&&l.push(p)}}return s}(e.get("grids").get(n),t);return e.setIn(["grids",n],r)},$e=function(e,t){switch(t.type){case"CLEAR":return function(e,t){for(var n=e.get("active"),r=e.get("columns"),a=e.get("rows"),o=Object(ge.a)(),c=0;c<a*r;c++)o=o.push("");return e.setIn(["grids",n],o)}(e);case m:return Ke(e,t);case g:return function(e,t){var n=e.get("active"),r=e.get("grids").get(n),a=Ye(r,"",t.id);return e.setIn(["grids",n],a)}(e,t);case v:return Ze(e,t);default:return e}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;return e===t.drawingTool?f:t.drawingTool};function Qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INIT_STATE":return f;case"SWITCH_TOOL":return qe(e,t);case E:return f;case"SELECT_PALETTE_COLOR":default:return e}}var et=function(){return Object(ge.b)({grid:Object(ge.a)(["#ff0000","#ff3300","#ff9900","#ffff00","#99ff00","#00ff00","#00ffff","#0000ff","#6600ff","#ff00ff","#ff0066","","",""]).map((function(e,t){return Object(ge.b)({color:e,id:t})})),active:0})},tt=function(e,t){var n=t.paletteGrid;return Object(ge.c)({grid:n,active:0})},nt=function(e,t){return e.set("active",t.id)},rt=function(e,t){return"ERASER"===t.drawingTool?e.set("active",-1):e},at=function(e,t){var n=t.color,r=e.get("grid"),a=function(e,t){for(var n=0;n<e.size-1;n++)if(e.getIn([n,"color"])===t)return n;return-1}(r,n);if(-1!==a)return e.set("active",a);var o=r.size-1;return e.merge({grid:r.setIn([o,"color"],n),active:o})},ot=function(e,t){var n=t.color,r=e.get("grid"),a=e.get("active");return-1===a?e.merge({grid:r.setIn([a,"color"],n),active:r.size-1}):e.merge({grid:r.setIn([a,"color"],n),active:a})},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INIT_STATE":case"NEW_PROJECT":return et();case"SET_CANVAS":return tt(0,t);case"SELECT_PALETTE_COLOR":return nt(e,t);case E:return at(e,t);case"SWITCH_TOOL":return rt(e,t);case h:return ot(e,t);default:return e}};function it(e){var t={cellSize:10};return e.merge(t)}function ut(){return it(Object(ge.b)())}var lt=function(e){return function(t,n){return e.reduce((function(e,t){return t(e,n)}),t)}};function st(e,t){switch(t.type){case"SET_INIT_STATE":return it(e);default:return e}}var dt=Object(oe.d)(O()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut(),t=arguments.length>1?arguments[1]:void 0;return st(e,t).merge({canvas:lt([Je,$e])(e.get("canvas"),t),drawingTool:Qe(e.get("drawingTool"),t),palette:ct(e.get("palette"),t)})}),{filter:Object(b.includeAction)([g,E,v,m,"CLEAR"]),debug:!0}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pt=document.getElementById("root");i.a.render(o.a.createElement(G.a,{store:dt},o.a.createElement(_e,{dispatch:dt.dispatch})),pt),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){}},[[162,1,2]]]);
//# sourceMappingURL=main.a821b3a7.chunk.js.map